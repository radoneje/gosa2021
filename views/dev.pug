doctype html
html
    head
        <meta name="viewport" content="width=device-width,initial-scale=1">
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-88562228-1"></script>
        <link href="/lib/video-js.css" rel="stylesheet"/>
        <script src="/lib/videojs-ie8.min.js"></script>
        script(src="/lib/axios.min.js" integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg==" crossorigin="anonymous")
        <link href="/fonts.css" rel="stylesheet"/>
        <link href="/lib/quality-selector.css" rel="stylesheet">
        <link href="/main.css" rel="stylesheet">
        style.
            #langSelector{
            position: absolute;
            top: 4px;
            right: 4px;
            cursor: pointer;
            color: white;
            padding: 4px;
            border: 1px solid white;
            border-radius: 8px;
            opacity: .5;
            transition: opacity .5s ease;
            background: rgba(0,0,0,.2);
            }
            #langSelector:hover{
                opacity: 1;

            }
        script.
            var hall = !{JSON.stringify(hall)};
            var lang = !{JSON.stringify(lang)};
    body(style="opacity: 0;")
        .videoWrapper
            video.video.video-js#my-video( style="opacity:1" loop controls playsinline preload="auto" width="640" height="264" data-setup="{}")
            #langSelector( onclick="document.location.href='/dev/"+hall+"/"+(lang=="ru"?"en":"ru")+"'") !{lang=="ru"?"EN":"RU"}
        script(src="/lib/video.js")
        script(src="/lib/silvermine-videojs-quality-selector.min.js")
        script.

            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag('js', new Date());
            gtag('config', 'UA-88562228-1');


            var src = [
                {
                    src: "https://hls-fabrikanews.cdnvideo.ru/fabrikanews2/"+(hall=="ms"?"ms":"dev")+"_"+lang.toLowerCase()+"/playlist.m3u8",
                    label: "720P",
                    selected: true
                }
            ];
            var match=hall.match(/hall(\d\d)/);
            if(match && parseInt(match[1])>10)
            {
                src[0].src="https://hls-fabrikanews.cdnvideo.ru/fabrikanews2/hall" +match[1]+"_"+lang.toLowerCase()+"/playlist.m3u8"
            }
                console.log(src)
            var player = videojs('my-video');
            player.src(src);
            player.poster("/poster/"+hall+"_"+lang.toLowerCase()+".png");
            player.controlBar.addChild('QualitySelector');

            document.body.style.opacity = 1;
